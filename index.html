<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>E.Z.A.F. Tutoring | Learning Made Simple</title>

  <!-- Load the main stylesheet from the site root. Using an absolute
       path ensures the CSS is always found regardless of where the
       page lives on the server. -->
  <link rel="stylesheet" href="/style.css" />

  <!-- Minimal fallback styles to keep the page readable before the
       external CSS loads. These avoid flashes of unstyled content. -->
  <style>
    body { margin: 0; font-family: Arial, sans-serif; color: #1b1c3e; background: #fff; }
    header.hero { height: 60vh; display: flex; align-items: center; justify-content: center; text-align: center; background-color: #4b39b3; color: #fff; }
    header.hero h1 { font-size: 2.5rem; margin: 0; }
  </style>
</head>
<body>
  <!-- Hero section with a prominent headline and call‑to‑action.  The
       background image is defined in the CSS (via style.css). -->
  <header class="hero">
    <div class="hero-content">
      <h1>Learning&nbsp;Made&nbsp;Simple</h1>
      <p>Personalized math &amp; science help for Grades&nbsp;9–12</p>
      <a href="#contact" class="cta-button">Book Your Free Consultation</a>
    </div>
  </header>

  <main>
    <!-- About section introducing the tutoring firm -->
    <section id="about" class="about-section">
      <h2>About Us</h2>
      <p>
        E.Z.A.F. Tutoring provides one-on-one support in math and the
        sciences (chemistry, biology and physics) for high school students.
        Every session is thoughtfully prepared around the student’s needs—
        lessons are planned in advance and students enjoy an extra 30
        minutes of free response time to tackle any schoolwork they find
        challenging. Our goal is to build confidence and ensure deep
        understanding, not just memorization.
      </p>
    </section>

    <!-- Services section outlining what the firm offers -->
    <section id="services" class="services-section">
      <h2>What We Offer</h2>
      <div class="service-grid">
        <div class="service-card">
          <h3>Custom Lessons</h3>
          <p>
            Lessons are designed specifically for each student, including
            an additional 30&nbsp;minutes of free responses for any schoolwork
            they don’t understand.
          </p>
        </div>
        <div class="service-card">
          <h3>Flexible Sessions</h3>
          <p>
            Need more practice on tough problems? Schedule an entire
            session of free responses or tailor the structure to fit your
            learning style.
          </p>
        </div>
        <div class="service-card">
          <h3>Free Consultations</h3>
          <p>
            New students receive a free consultation to understand their
            goals and learning gaps, plus complimentary practice sheets to
            reinforce their skills.
          </p>
        </div>
      </div>
    </section>

    <!-- Pricing section to highlight affordability and guarantee -->
    <section id="pricing" class="pricing-section">
      <h2>Affordable Pricing</h2>
      <div class="pricing-card">
        <h3>$30&nbsp;per&nbsp;session</h3>
        <p>
          Each session includes 1.5&nbsp;hours of instruction and lesson
          planning. Enjoy personalised help at an accessible rate.
        </p>
        <p>100&nbsp;% satisfaction or your money back.</p>
      </div>
    </section>

    <!-- Resources section with integrated PDF viewer and picker -->
    <section id="resources" class="about-section">
      <h2>Resources &amp; Materials</h2>
      <p style="text-align:center; max-width:700px; margin:0 auto 2rem;">
        View our downloadable resources, lesson samples, and information sheets below.
      </p>

      <!-- Dropdown + action buttons to open and download files -->
      <div class="pdf-picker">
        <label for="pdfSelect">Select a file:</label>
        <select id="pdfSelect" aria-label="Select a PDF to view"></select>
        <a id="openBtn" class="view-link" target="_blank" rel="noopener">Open in new tab</a>
        <a id="downloadBtn" class="view-link" download>Download</a>
      </div>

      <!-- Warning or info message placeholder -->
      <div id="warn" class="note-warn" style="display:none; text-align:center; margin-bottom:10px;"></div>

      <!-- Embedded PDF viewer; one instance only -->
      <div class="pdf-viewer-container">
        <iframe
          id="pdfFrame"
          class="pdf-frame"
          title="EZAF PDF Viewer"
          allowfullscreen>
        </iframe>
      </div>
    </section>

    <!-- Contact section with ways to reach the tutor -->
    <section id="contact" class="contact-section">
      <h2>Get in Touch</h2>
      <p>Call or text <a href="tel:+19055147522">(905)&nbsp;514-7522</a> to
        schedule your first free session.</p>
      <p>Email us anytime at 
        <a href="mailto:pierreibrahim@ezaftutoring.com">pierreibrahim@ezaftutoring.com</a>
        for general inquiries or lesson information.
      </p>
      <p>For technical assistance or platform-related issues, contact
        <a href="mailto:support@ezaftutoring.com">support@ezaftutoring.com</a>.
      </p>
      <p>Located in Milton, Ontario. Serving students in person and online.</p>
      <p>First session is free for new students.</p>
    </section>
  </main>

  <!-- Footer with clear layout and contact links -->
  <footer>
    <div class="footer-content">
      <p class="footer-brand">
        E.Z.A.F. Tutoring — Personalized math &amp; science help for Grades&nbsp;9–12.
        Learning made simple.
      </p>
      <div class="footer-links">
        <a href="mailto:pierreibrahim@ezaftutoring.com">Contact</a>
        <a href="mailto:support@ezaftutoring.com">Support</a>
      </div>
    </div>
  </footer>

  <!-- Single script to populate the dropdown and manage the PDF viewer -->
  <script>
    (function () {
      const select = document.getElementById('pdfSelect');
      const frame = document.getElementById('pdfFrame');
      const openBtn = document.getElementById('openBtn');
      const downloadBtn = document.getElementById('downloadBtn');
      const warn = document.getElementById('warn');

      /**
       * Set the viewer to display the given PDF path. Ensure the path is
       * absolute (prefixed with '/') and fully URL-encoded (including
       * slashes). Also update the action links.
       *
       * @param {string} path Raw relative or absolute PDF path.
       */
      function setViewer(path) {
        if (!path) return;
        // Prefix with slash if necessary and remove duplicate slashes
        if (!path.startsWith('/')) {
          path = '/' + path.replace(/^\/+/,'');
        }
        const encoded = encodeURIComponent(path);
        // Use the viewer.html at the root; file param expects encoded path
        // The PDF viewer lives in the pdfjs directory. Use an absolute path
        // so the file is always resolved correctly, regardless of nested directories.
        frame.src = `/pdfjs/viewer.html?file=${encoded}#zoom=page-width`;
        openBtn.href = path;
        downloadBtn.href = path;
        downloadBtn.download = path.split('/').pop() || 'file.pdf';
      }

      /**
       * Populate the select element with items from the manifest.
       * @param {Array<{file:string,title?:string}>} items
       */
      function populate(items) {
        select.innerHTML = '';
        items.forEach(item => {
          const opt = document.createElement('option');
          opt.value = item.file;
          opt.textContent = item.title || (item.file || '').split('/').pop();
          select.appendChild(opt);
        });
      }

      /**
       * Display a warning message to the user.
       * @param {string} msg
       */
      function showWarn(msg) {
        warn.style.display = 'block';
        warn.textContent = msg;
      }

      // Load the manifest from the /pdfs folder and configure the picker
      fetch('/pdfs/manifest.json', { cache: 'no-store' })
        .then(res => {
          if (!res.ok) throw new Error('Manifest not found');
          return res.json();
        })
        .then(data => {
          const items = Array.isArray(data.items) ? data.items.filter(Boolean) : [];
          if (!items.length) {
            showWarn('No items found in /pdfs/manifest.json.');
            return;
          }
          populate(items);
          // Load the first PDF by default
          setViewer(items[0].file);
          select.addEventListener('change', () => {
            setViewer(select.value);
            warn.style.display = 'none';
          });
        })
        .catch(() => {
          showWarn('Could not load /pdfs/manifest.json.');
          // Optionally load a fallback PDF
          // setViewer('/pdfs/Introduction to Integrals.pdf');
        });
    })();
  </script>
</body>
</html>